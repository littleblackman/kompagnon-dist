import{e as _,r as E,g as w,c as P,J as U,A as y,K as L,L as j,M as z,N as K,O as k,H as V,C as R,w as F,o as N,b as q,h as H}from"./kYLNFxuI.js";const G=Symbol.for("nuxt:client-only"),$=_({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(n,{slots:t,attrs:e}){const r=E(!1);return w(()=>{r.value=!0}),U(G,!0),o=>{var a;if(r.value)return(a=t.default)==null?void 0:a.call(t);const i=t.fallback||t.placeholder;if(i)return i();const u=o.fallback||o.placeholder||"",l=o.fallbackTag||o.placeholderTag||"span";return P(l,e,u)}}});var J=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],W=function(n){return J.map(function(t){return t.toLowerCase()}).indexOf(n.toLowerCase())!==-1},Q=function(n,t,e){Object.keys(t).filter(W).forEach(function(r){var o=t[r];typeof o=="function"&&(r==="onInit"?o(n,e):e.on(r.substring(2),function(i){return o(i,e)}))})},X=function(n,t,e,r){var o=n.modelEvents?n.modelEvents:null,i=Array.isArray(o)?o.join(" "):o;y(r,function(u,l){e&&typeof u=="string"&&u!==l&&u!==e.getContent({format:n.outputFormat})&&e.setContent(u)}),e.on(i||"change input undo redo",function(){t.emit("update:modelValue",e.getContent({format:n.outputFormat}))})},Y=function(n,t,e,r,o,i){r.setContent(i()),e.attrs["onUpdate:modelValue"]&&X(t,e,r,o),Q(n,e.attrs,r)},A=0,D=function(n){var t=Date.now(),e=Math.floor(Math.random()*1e9);return A++,n+"_"+e+A+String(t)},Z=function(n){return n!==null&&n.tagName.toLowerCase()==="textarea"},O=function(n){return typeof n>"u"||n===""?[]:Array.isArray(n)?n:n.split(" ")},nn=function(n,t){return O(n).concat(O(t))},en=function(n){return n==null},T=function(){return{listeners:[],scriptId:D("tiny-script"),scriptLoaded:!1}},tn=function(){var n=T(),t=function(o,i,u,l){var a=i.createElement("script");a.referrerPolicy="origin",a.type="application/javascript",a.id=o,a.src=u;var m=function(){a.removeEventListener("load",m),l()};a.addEventListener("load",m),i.head&&i.head.appendChild(a)},e=function(o,i,u){n.scriptLoaded?u():(n.listeners.push(u),o.getElementById(n.scriptId)||t(n.scriptId,o,i,function(){n.listeners.forEach(function(l){return l()}),n.scriptLoaded=!0}))},r=function(){n=T()};return{load:e,reinitialize:r}},on=tn(),an=function(){return typeof window<"u"?window:global},f=function(){var n=an();return n&&n.tinymce?n.tinymce:null},rn={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return n==="html"||n==="text"}}},s=function(){return s=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},s.apply(this,arguments)},ln=function(n,t,e,r){return n(r||"div",{id:t,ref:e})},un=function(n,t,e){return n("textarea",{id:t,visibility:"hidden",ref:e})},S={selector:void 0,target:void 0},cn=_({props:rn,setup:function(n,t){var e=n.init?s(s({},n.init),S):s({},S),r=L(n),o=r.disabled,i=r.modelValue,u=r.tagName,l=E(null),a=null,m=n.id||D("tiny-vue"),b=n.init&&n.init.inline||n.inline,h=!!t.attrs["onUpdate:modelValue"],C=!0,x=n.initialValue?n.initialValue:"",p="",B=function(c){return h?function(){return i!=null&&i.value?i.value:""}:function(){return c?x:p}},g=function(){var c=B(C),d=s(s({},e),{readonly:n.disabled,target:l.value,plugins:nn(e.plugins,n.plugins),toolbar:n.toolbar||e.toolbar,inline:b,license_key:n.licenseKey,setup:function(v){a=v,v.on("init",function(I){return Y(I,n,t,v,i,c)}),typeof e.setup=="function"&&e.setup(v)}});Z(l.value)&&(l.value.style.visibility=""),f().init(d),C=!1};y(o,function(c){var d;a!==null&&(typeof((d=a.mode)===null||d===void 0?void 0:d.set)=="function"?a.mode.set(c?"readonly":"design"):a.setMode(c?"readonly":"design"))}),y(u,function(c){var d;h||(p=a.getContent()),(d=f())===null||d===void 0||d.remove(a),V(function(){return g()})}),w(function(){if(f()!==null)g();else if(l.value&&l.value.ownerDocument){var c=n.cloudChannel?n.cloudChannel:"7",d=n.apiKey?n.apiKey:"no-api-key",v=en(n.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(d,"/tinymce/").concat(c,"/tinymce.min.js"):n.tinymceScriptSrc;on.load(l.value.ownerDocument,v,g)}}),j(function(){f()!==null&&f().remove(a)}),b||(z(function(){C||g()}),K(function(){var c;h||(p=a.getContent()),(c=f())===null||c===void 0||c.remove(a)}));var M=function(c){var d;p=a.getContent(),(d=f())===null||d===void 0||d.remove(a),e=s(s(s({},e),c),S),V(function(){return g()})};return t.expose({rerender:M,getEditor:function(){return a}}),function(){return b?ln(k,m,l,n.tagName):un(k,m,l)}}});const sn=_({__name:"RichTextEditor",props:{modelValue:{},contentType:{}},emits:["update:modelValue"],setup(n,{emit:t}){const e=n,r=t,o=E(e.modelValue);return y(()=>e.modelValue,i=>{i!==o.value&&(o.value=i)}),y(o,i=>{r("update:modelValue",i)}),(i,u)=>{const l=$;return N(),R(l,null,{default:F(()=>[q(H(cn),{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=a=>o.value=a),"api-key":"rh94623y86575qrj04nyduzxsrhx2n6v9hi1pwz2c4idlt9i",init:{height:300,menubar:!1,plugins:["lists","link","emoticons"],toolbar:"styles | bold italic underline | forecolor backcolor | bullist numlist | link emoticons | removeformat",quickbars_selection_toolbar:"bold italic underline | quicklink",quickbars_insert_toolbar:!1,contextmenu:"link",content_style:`body {
          font-family: -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, Helvetica Neue, sans-serif;
          font-size: 16px;
          color: #000000;
          ${e.contentType==="organizational"?"color: #9CA3AF !important; font-style: italic;":""}
          ${e.contentType==="printable"?"color: #111827 !important;":""}
        }`,style_formats:[{title:"Titres",items:[{title:"Titre 1",format:"h1"},{title:"Titre 2",format:"h2"},{title:"Titre 3",format:"h3"},{title:"Paragraphe",format:"p"}]}]}},null,8,["modelValue","init"])]),_:1})}}});export{sn as _};
