import{_ as V}from"./B67Zj-Ll.js";import{c as n,o as a,a as t,e as $,u as C,f as w,r as N,g as q,b as s,h as i,i as _,j as L,t as r,w as g,d as v,F as T,k as B}from"./kYLNFxuI.js";import{u as H}from"./TqZ_-_Su.js";import{r as j,a as k,b as S}from"./BK63L-4w.js";function A(f,h){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function b(f,h){return a(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}const D={class:"min-h-screen bg-gray-50"},z={class:"bg-white shadow-sm border-b"},E={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},F={class:"flex items-center justify-between"},I={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},K={key:0,class:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-8"},R={class:"flex items-center justify-between"},U={class:"flex items-center space-x-3"},Z={class:"text-sm text-amber-700"},J={key:1,class:"text-center py-8"},O={key:2},G={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8"},Q={class:"bg-white rounded-lg shadow-sm border p-6"},W={class:"flex items-center justify-between"},X={class:"text-3xl font-bold text-gray-900"},Y={class:"bg-white rounded-lg shadow-sm border p-6"},tt={class:"flex items-center justify-between"},et={class:"text-3xl font-bold text-gray-900"},st={class:"bg-white rounded-lg shadow-sm border p-6"},ot={class:"flex items-center justify-between"},rt={class:"text-3xl font-bold text-gray-900"},nt={class:"bg-white rounded-lg shadow-sm border p-6"},at={class:"flex items-center justify-between"},it={class:"text-3xl font-bold text-gray-900"},lt={class:"bg-white rounded-lg shadow-sm border p-6"},dt={class:"flex items-center justify-between"},mt={class:"text-3xl font-bold text-gray-900"},ct={class:"bg-white rounded-lg shadow-sm border p-6"},ut={key:0,class:"text-center py-8"},xt={key:1,class:"space-y-4"},pt={class:"flex items-center justify-between"},gt={class:"font-medium text-gray-900"},vt={class:"text-sm text-gray-600"},bt=["innerHTML"],ft={class:"text-right"},ht={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800"},yt={class:"mt-8 text-center"},wt={class:"flex flex-col sm:flex-row gap-4 justify-center"},Pt=$({__name:"dashboard",setup(f){C().requireAuth();const x=H(),l=w(()=>x.statistics),P=w(()=>x.isLoading),d=N(null);function M(m){const e=new Date(m),o=new Date().getTime()-e.getTime(),u=Math.floor(o/6e4),p=Math.floor(o/36e5),y=Math.floor(o/864e5);return u<1?"à l'instant":u<60?`il y a ${u} minute${u>1?"s":""}`:p<24?`il y a ${p} heure${p>1?"s":""}`:`il y a ${y} jour${y>1?"s":""}`}return q(async()=>{if(await x.refreshIfNeeded(),typeof window<"u"){const m=localStorage.getItem("lastVisitedProject");if(m)try{d.value=JSON.parse(m)}catch(e){console.error("Erreur parsing lastVisitedProject:",e)}}}),(m,e)=>{const c=V;return a(),n("div",D,[t("div",z,[t("div",E,[t("div",F,[e[0]||(e[0]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Tableau de bord"),t("p",{class:"mt-2 text-lg text-gray-600"},"Vue d'ensemble de vos projets et contenus")],-1)),s(i(j),{class:"w-12 h-12 text-amber-500"})])])]),t("div",I,[d.value?(a(),n("div",K,[t("div",R,[t("div",U,[s(i(A),{class:"w-5 h-5 text-amber-600"}),t("div",null,[e[1]||(e[1]=t("p",{class:"text-sm font-medium text-amber-900"},"Dernier projet consulté",-1)),t("p",Z,r(d.value.name)+" - "+r(M(d.value.timestamp)),1)])]),s(c,{to:`/projets/projet-${d.value.slug}`,class:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-amber-700 bg-amber-100 rounded-md hover:bg-amber-200 transition-colors"},{default:g(()=>e[2]||(e[2]=[v(" Reprendre ")])),_:1},8,["to"])])])):_("",!0),e[19]||(e[19]=L('<div class="bg-white rounded-lg shadow-sm border p-6 mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">Bienvenue sur Kompagnon</h2><div class="prose text-gray-700"><p class="mb-4"><strong>Kompagnon</strong> est votre assistant numérique pour la gestion de projets créatifs. Cette plateforme vous accompagne dans l&#39;organisation et le développement de vos projets théâtraux, cinématographiques et artistiques. </p><p class="mb-4"> Structurez votre travail créatif grâce à une hiérarchie intuitive : <span class="font-medium text-amber-600">Projets → Parties → Séquences → Scènes</span>, gérez vos personnages avec un système d&#39;avatars et de niveaux, et suivez l&#39;évolution de votre contenu en temps réel. </p><p> Le tableau de bord ci-dessous vous offre une vue globale de votre activité créative et vous permet de naviguer rapidement vers vos contenus les plus récents. </p></div></div>',1)),P.value?(a(),n("div",J,e[3]||(e[3]=[t("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"},null,-1),t("p",{class:"mt-2 text-gray-600"},"Chargement des statistiques...",-1)]))):(a(),n("div",O,[t("div",G,[t("div",Q,[t("div",W,[t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-600"},"Projets",-1)),t("p",X,r(l.value.totalProjects),1)]),s(i(k),{class:"w-10 h-10 text-blue-500"})]),e[5]||(e[5]=t("p",{class:"mt-2 text-sm text-gray-500"},"Projets créés au total",-1))]),t("div",Y,[t("div",tt,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-600"},"Parties",-1)),t("p",et,r(l.value.totalParts),1)]),s(i(b),{class:"w-10 h-10 text-green-500"})]),e[7]||(e[7]=t("p",{class:"mt-2 text-sm text-gray-500"},"Sections structurelles",-1))]),t("div",st,[t("div",ot,[t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-600"},"Séquences",-1)),t("p",rt,r(l.value.totalSequences),1)]),s(i(j),{class:"w-10 h-10 text-purple-500"})]),e[9]||(e[9]=t("p",{class:"mt-2 text-sm text-gray-500"},"Unités narratives",-1))]),t("div",nt,[t("div",at,[t("div",null,[e[10]||(e[10]=t("p",{class:"text-sm font-medium text-gray-600"},"Scènes",-1)),t("p",it,r(l.value.totalScenes),1)]),s(i(S),{class:"w-10 h-10 text-amber-500"})]),e[11]||(e[11]=t("p",{class:"mt-2 text-sm text-gray-500"},"Unités d'action",-1))]),t("div",lt,[t("div",dt,[t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-600"},"Personnages",-1)),t("p",mt,r(l.value.totalPersonnages),1)]),s(i(S),{class:"w-10 h-10 text-rose-500"})]),e[13]||(e[13]=t("p",{class:"mt-2 text-sm text-gray-500"},"Créations de caractères",-1))])]),t("div",ct,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Scènes récentes",-1)),l.value.recentScenes.length===0?(a(),n("div",ut,[s(i(b),{class:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e[14]||(e[14]=t("p",{class:"text-gray-500"},"Aucune scène créée pour le moment",-1)),e[15]||(e[15]=t("p",{class:"text-sm text-gray-400 mt-1"},"Commencez par créer votre premier projet",-1))])):(a(),n("div",xt,[(a(!0),n(T,null,B(l.value.recentScenes,o=>(a(),n("div",{key:o.id,class:"border-l-4 border-amber-400 pl-4 py-2 hover:bg-gray-50 transition-colors"},[t("div",pt,[t("div",null,[t("h4",gt,r(o.name),1),t("p",vt,r(o.projectName)+" → "+r(o.sequenceName),1),o.description?(a(),n("div",{key:0,class:"text-sm text-gray-500 mt-1",innerHTML:o.description.substring(0,100)+(o.description.length>100?"...":"")},null,8,bt)):_("",!0)]),t("div",ft,[t("span",ht," Scène #"+r(o.position),1)])])]))),128))]))]),t("div",yt,[t("div",wt,[s(c,{to:"/projets/tous",class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-amber-600 hover:bg-amber-700 transition-colors"},{default:g(()=>[s(i(k),{class:"w-5 h-5 mr-2"}),e[17]||(e[17]=v(" Voir tous les projets "))]),_:1}),s(c,{to:"/projets/creer",class:"inline-flex items-center px-6 py-3 border border-gray-300 text-base font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors"},{default:g(()=>[s(i(b),{class:"w-5 h-5 mr-2"}),e[18]||(e[18]=v(" Créer un projet "))]),_:1})])])]))])])}}});export{Pt as default};
