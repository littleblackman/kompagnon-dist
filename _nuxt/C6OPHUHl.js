import{_ as Ie}from"./DKoE4HND.js";import{c as a,o as s,a as t,e as $e,f as fe,r as f,i as k,F as q,k as oe,y as le,b as L,h as K,d as C,l as B,z as ae,A as he,g as _e,B as Ce,t as b,u as je,x as Ae,C as De,w as be,m as xe,v as ye,s as Le}from"./DDbqB2VL.js";import{u as ke,a as Ee}from"./BTMoKPNP.js";import{_ as Fe}from"./DKTG0W-z.js";import{r as we}from"./BeOHE0yY.js";import{_ as re}from"./DlAUqK2U.js";import{P as Pe}from"./BlRu_04W.js";import{u as Ue}from"./BrOfTtPO.js";import"./BqMwdbGL.js";function Be(x,E){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z","clip-rule":"evenodd"})])}function Ne(x,E){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z","clip-rule":"evenodd"})])}function ze(x,E){return s(),a("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z","clip-rule":"evenodd"})])}const Me={class:"image-uploader"},Se={key:0,class:"mb-6"},Te={class:"grid grid-cols-4 gap-4"},Ve=["onDragstart","onDrop"],Ke={class:"relative group"},Re=["src","alt","onClick"],He={key:0,class:"absolute top-1 left-1 bg-amber-500 text-white text-xs px-2 py-1 rounded"},Oe=["onClick"],Ze=["src","alt"],qe=$e({__name:"ImageUploader",props:{personnageId:{},images:{}},emits:["imagesUpdated"],setup(x,{emit:E}){const u=x,j=E;console.log("Images re√ßues dans ImageUploader:",u.images),console.log("Type des images:",typeof u.images),console.log("Est-ce un array?:",Array.isArray(u.images));const n=fe(()=>{if(!u.images)return[];if(typeof u.images=="string")try{const e=JSON.parse(u.images);return Array.isArray(e)?e:[]}catch{return[]}return Array.isArray(u.images)?u.images:[]}),I=ke(),o=ae(),y=fe(()=>o.public.apiBase.replace("/api","")),m=f(),c=f(),A=f(!1),d=f(null),v=f(null),F=f(!1),N=e=>{e.preventDefault()},G=e=>{e.preventDefault(),A.value=!0},z=e=>{var r;e.preventDefault(),(r=m.value)!=null&&r.contains(e.relatedTarget)||(A.value=!1)},J=e=>{var i;e.preventDefault(),A.value=!1;const r=Array.from(((i=e.dataTransfer)==null?void 0:i.files)||[]);S(r)},X=()=>{var e;(e=c.value)==null||e.click()},W=e=>{const r=e.target,i=Array.from(r.files||[]);console.log("Fichiers s√©lectionn√©s:",i.length,i),S(i),r.value=""},M=(e,r=1024)=>new Promise(i=>{const g=document.createElement("canvas"),p=g.getContext("2d"),w=new Image;w.onload=()=>{let{width:_,height:h}=w;const $=1920;_>h&&_>$?(h=h*$/_,_=$):h>$&&(_=_*$/h,h=$),g.width=_,g.height=h,p==null||p.drawImage(w,0,0,_,h);const T=P=>{g.toBlob(U=>{if(U){const V=U.size/1024;if(console.log(`Compression avec qualit√© ${P}: ${V.toFixed(0)}KB`),V<=r||P<=.1){const Z=new File([U],e.name,{type:e.type,lastModified:Date.now()});i(Z)}else T(P-.1)}},e.type,P)};T(.8)},w.src=URL.createObjectURL(e)}),S=async e=>{if(e.length===0)return;const r=e.filter(i=>i.type.startsWith("image/"));if(r.length===0){alert("Veuillez s√©lectionner des fichiers images.");return}F.value=!0;try{console.log("Compression des images...");const i=await Promise.all(r.map(async w=>{const _=w.size/1024;if(console.log(`Image originale: ${w.name} - ${_.toFixed(0)}KB`),_>1024){const h=await M(w),$=h.size/1024;return console.log(`Image compress√©e: ${h.name} - ${$.toFixed(0)}KB`),h}return w})),g=await I.uploadImages(u.personnageId,i),p=I.personnages.find(w=>w.id===u.personnageId);j("imagesUpdated",(p==null?void 0:p.images)||[])}catch(i){console.error("Erreur lors de l'upload:",i),alert("Erreur lors de l'upload des images.")}finally{F.value=!1}},Q=e=>{d.value=e},R=()=>{d.value=null},Y=()=>{d.value!==null&&d.value>0&&d.value--},ee=()=>{d.value!==null&&d.value<n.value.length-1&&d.value++},te=async e=>{if(!(!n.value||!n.value[e]||!confirm("√ätes-vous s√ªr de vouloir supprimer cette image ?")))try{await I.deleteImage(u.personnageId,n.value[e]);const i=n.value.filter((g,p)=>p!==e);j("imagesUpdated",i)}catch(i){console.error("Erreur lors de la suppression:",i),alert("Erreur lors de la suppression de l'image.")}},H=e=>{v.value=e},O=e=>{e.preventDefault()},l=async e=>{if(v.value===null||v.value===e||!n.value)return;const r=[...n.value],i=r[v.value];r.splice(v.value,1),r.splice(e,0,i);try{await I.reorderImages(u.personnageId,r),j("imagesUpdated",r)}catch(g){console.error("Erreur lors de la r√©organisation:",g),alert("Erreur lors de la r√©organisation des images.")}v.value=null};return(e,r)=>(s(),a("div",Me,[n.value&&n.value.length>0?(s(),a("div",Se,[r[1]||(r[1]=t("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Images actuelles",-1)),t("div",Te,[(s(!0),a(q,null,oe(n.value,(i,g)=>(s(),a("div",{key:g,class:"image-item",draggable:!0,onDragstart:p=>H(g),onDragover:O,onDrop:p=>l(g)},[t("div",Ke,[t("img",{src:`${y.value}/${i}`,alt:`Image ${g+1}`,class:"w-full h-20 object-cover rounded-lg cursor-pointer",onClick:p=>Q(g)},null,8,Re),g===0?(s(),a("div",He," Avatar ")):k("",!0),t("button",{onClick:B(p=>te(g),["stop"]),class:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},[L(K(we),{class:"w-4 h-4"})],8,Oe)])],40,Ve))),128))])])):k("",!0),t("div",{ref_key:"dropZone",ref:m,onDrop:J,onDragover:N,onDragenter:G,onDragleave:z,onClick:X,class:le(["drop-zone",{"drag-active":A.value}])},[L(K(ze),{class:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r[2]||(r[2]=t("p",{class:"text-gray-600 text-center"},[t("span",{class:"font-medium"},"Cliquez pour ajouter"),C(" ou glissez-d√©posez des images ")],-1)),r[3]||(r[3]=t("p",{class:"text-sm text-gray-400 text-center mt-2"}," PNG, JPG, GIF - Compression automatique < 1MB ",-1))],34),t("input",{ref_key:"fileInput",ref:c,type:"file",multiple:"",accept:"image/*",onChange:W,class:"hidden"},null,544),d.value!==null?(s(),a("div",{key:1,class:"lightbox-overlay",onClick:R},[t("div",{class:"lightbox-content",onClick:r[0]||(r[0]=B(()=>{},["stop"]))},[t("img",{src:`${y.value}/${n.value[d.value]}`,alt:`Image ${d.value+1}`,class:"max-w-full max-h-full"},null,8,Ze),d.value>0?(s(),a("button",{key:0,onClick:Y,class:"nav-btn nav-prev"},[L(K(Be),{class:"w-6 h-6"})])):k("",!0),d.value<n.value.length-1?(s(),a("button",{key:1,onClick:ee,class:"nav-btn nav-next"},[L(K(Ne),{class:"w-6 h-6"})])):k("",!0),t("button",{onClick:R,class:"close-btn"},[L(K(we),{class:"w-6 h-6"})])])])):k("",!0)]))}}),Ge=re(qe,[["__scopeId","data-v-bad29e5c"]]),Je={class:"relative w-full h-full flex items-center justify-center p-4"},Xe={class:"relative max-w-full max-h-full flex items-center justify-center"},We=["src","alt"],Qe={class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 text-white bg-black bg-opacity-50 px-3 py-1 rounded-full text-sm"},Ye={key:2,class:"absolute bottom-16 left-1/2 transform -translate-x-1/2 flex space-x-2 max-w-full overflow-x-auto px-4"},et=["onClick"],tt=["src","alt"],st={__name:"Lightbox",props:{images:{type:Array,required:!0},currentIndex:{type:Number,default:0},show:{type:Boolean,default:!1}},emits:["close","update:currentIndex"],setup(x,{emit:E}){const u=x,j=E,n=f(u.currentIndex);he(()=>u.currentIndex,c=>{n.value=c}),he(()=>u.show,c=>{c?document.body.style.overflow="hidden":document.body.style.overflow=""});const I=()=>{j("close")},o=()=>{n.value>0&&(n.value--,j("update:currentIndex",n.value))},y=()=>{n.value<u.images.length-1&&(n.value++,j("update:currentIndex",n.value))},m=c=>{if(u.show)switch(c.key){case"Escape":I();break;case"ArrowLeft":o();break;case"ArrowRight":y();break}};return _e(()=>{document.addEventListener("keydown",m)}),Ce(()=>{document.removeEventListener("keydown",m),document.body.style.overflow=""}),(c,A)=>x.show&&x.images.length>0?(s(),a("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:I},[t("div",Je,[t("div",Xe,[t("img",{src:x.images[n.value],alt:`Image ${n.value+1}`,class:"max-w-full max-h-full object-contain rounded-lg shadow-2xl",onClick:A[0]||(A[0]=B(()=>{},["stop"]))},null,8,We)]),t("button",{onClick:I,class:"absolute top-4 right-4 text-white bg-black bg-opacity-50 hover:bg-opacity-75 rounded-full w-12 h-12 flex items-center justify-center text-2xl transition-colors z-10",title:"Fermer (Escape)"}," √ó "),n.value>0?(s(),a("button",{key:0,onClick:B(o,["stop"]),class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white bg-black bg-opacity-50 hover:bg-opacity-75 rounded-full w-12 h-12 flex items-center justify-center text-xl transition-colors",title:"Image pr√©c√©dente (‚Üê)"}," ‚Üê ")):k("",!0),n.value<x.images.length-1?(s(),a("button",{key:1,onClick:B(y,["stop"]),class:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white bg-black bg-opacity-50 hover:bg-opacity-75 rounded-full w-12 h-12 flex items-center justify-center text-xl transition-colors",title:"Image suivante (‚Üí)"}," ‚Üí ")):k("",!0),t("div",Qe,b(n.value+1)+" / "+b(x.images.length),1),x.images.length>1?(s(),a("div",Ye,[(s(!0),a(q,null,oe(x.images,(d,v)=>(s(),a("div",{key:v,class:le(["flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 cursor-pointer transition-all",v===n.value?"border-white":"border-transparent opacity-70 hover:opacity-100"]),onClick:B(F=>{n.value=v,j("update:currentIndex",v)},["stop"])},[t("img",{src:d,alt:`Miniature ${v+1}`,class:"w-full h-full object-cover"},null,8,tt)],10,et))),128))])):k("",!0)])])):k("",!0)}},at=re(st,[["__scopeId","data-v-f40ca9c1"]]),ot={key:1,class:"min-h-screen bg-gray-50 flex items-center justify-center"},lt={key:2,class:"min-h-screen bg-gray-50 flex items-center justify-center"},rt={key:3,class:"bg-gray-50 p-4 sm:p-6 lg:p-8"},nt={class:"max-w-7xl mx-auto"},it={class:"mb-8"},ct={class:"flex items-center space-x-2 text-sm text-gray-600 mb-4"},ut={class:"text-amber-800 font-medium"},dt={class:"flex items-center justify-between"},gt={class:"flex items-center space-x-4"},mt={class:"w-32 h-40 rounded-lg overflow-hidden bg-gray-200 border-4 border-white shadow-xl"},vt=["src","alt"],pt={key:1,class:"w-full h-full flex items-center justify-center text-gray-400 text-4xl font-bold"},ft={class:"text-3xl font-bold text-amber-900"},ht={class:"flex items-center space-x-3 mt-2"},bt={key:0,class:"text-gray-600"},xt={class:"flex space-x-3"},yt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},wt={class:"space-y-6"},_t={class:"bg-white rounded-lg shadow-lg p-6 border-l-4 border-orange-500"},kt={class:"space-y-3"},It={key:0,class:"p-2 bg-green-50 rounded border border-green-200"},$t={class:"text-gray-800 text-sm whitespace-pre-wrap"},Ct={key:0,class:"p-2 bg-red-50 rounded border border-red-200"},jt={class:"text-gray-800 text-sm whitespace-pre-wrap"},At={class:"bg-white rounded-lg shadow-lg p-6 border-l-4 border-purple-500"},Dt={key:0},Lt={key:1,class:"space-y-3 max-h-96 overflow-y-auto"},Et=["onClick"],Ft=["src","alt"],Pt={key:2,class:"text-center py-6"},Ut={key:0,class:"text-xs text-gray-400 mt-1"},Bt={class:"bg-white rounded-lg shadow-lg p-6 border-l-4 border-indigo-500"},Nt={class:"space-y-3"},zt={class:"flex justify-between items-center p-2 bg-indigo-50 rounded"},Mt={class:"font-bold text-indigo-600"},St={class:"flex justify-between items-center p-2 bg-indigo-50 rounded"},Tt={class:"font-bold text-indigo-600"},Vt={class:"lg:col-span-2 space-y-6"},Kt={class:"bg-white rounded-lg shadow-lg border-l-4 border-green-500"},Rt={class:"p-6"},Ht={key:0,class:"bg-green-50 rounded-lg border border-green-200 p-4"},Ot=["innerHTML"],Zt={key:1,class:"text-gray-500 italic"},qt={key:1,class:"min-h-96"},Gt={class:"bg-white rounded-lg shadow-lg p-6 border-l-4 border-blue-500"},Jt=["innerHTML"],Xt={__name:"detail-[slugPersonnage]",setup(x){const E=Ae(),u=Le(),j=ke();Ee();const n=je(),I=E.params.slugPersonnage,o=f(null),y=f(null),m=f(!1),c=f({}),A=f([]),d=f(0),v=f(!1),F=f(!0),N=f(null),{getImageUrl:G,getImagesUrls:z}=Ue(),J=l=>{var e;A.value=z((e=o.value)==null?void 0:e.images),d.value=l,v.value=!0},X=()=>{v.value=!1},W=l=>{d.value=l},M=async()=>{try{F.value=!0,N.value=null;const l=ae();console.log("Loading personnage with slug:",I);const e=await $fetch(`${l.public.apiBase}/personnage/${I}/details`,{headers:{"X-AUTH-TOKEN":n.token||""}});console.log("API response:",e),o.value=e,y.value=e.project,c.value={...e}}catch(l){N.value=l,console.error("Erreur lors du chargement du personnage:",l),u.push("/projets/tous")}finally{F.value=!1}};_e(()=>{M()});const S=()=>{m.value=!m.value,m.value&&(c.value={...o.value})},Q=async()=>{try{await j.savePersonnage(c.value,y.value.id),m.value=!1,await M()}catch(l){console.error("Erreur lors de la sauvegarde:",l)}},R=l=>{c.value.images=l,l.length>0?c.value.avatar=l[0]:c.value.avatar=void 0},Y=async()=>{try{console.log("Cr√©ation du sch√©ma actantiel pour:",o.value);const l=ae(),e=await $fetch(`${l.public.apiBase}/personnage/${o.value.id}/analyse/actantiel-schema`,{method:"POST",headers:{"X-AUTH-TOKEN":n.token||"","Content-Type":"application/json"},body:{personnageId:o.value.id,projectId:y.value.id}});console.log("R√©sultat du sch√©ma actantiel:",e)}catch(l){console.error("Erreur lors de la cr√©ation du sch√©ma actantiel:",l)}},ee=l=>({1:"Personnage principal",2:"Personnage secondaire",3:"Figurant",4:"Mention/R√©f√©rence"})[l]||"Non d√©fini",te=l=>({1:"text-red-600 bg-red-100",2:"text-orange-600 bg-orange-100",3:"text-yellow-600 bg-yellow-100",4:"text-gray-600 bg-gray-100"})[l]||"text-gray-600 bg-gray-100",H=l=>l?l.avatar?G(l.avatar):z(l.images)[0]||null:null,O=l=>z(l==null?void 0:l.images);return(l,e)=>{var i,g,p,w,_,h,$,T,P,U,V,Z,ne,ie,ce,ue,de,ge,me,ve,pe;const r=Ie;return s(),a("div",null,[y.value?(s(),De(Pe,{key:0,"project-slug":y.value.slug},null,8,["project-slug"])):k("",!0),F.value?(s(),a("div",ot,e[3]||(e[3]=[t("div",{class:"text-center"},[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto mb-4"}),t("p",{class:"text-gray-600"},"Chargement du personnage...")],-1)]))):N.value?(s(),a("div",lt,[t("div",{class:"text-center"},[e[4]||(e[4]=t("div",{class:"text-red-500 text-4xl mb-4"},"‚ö†Ô∏è",-1)),e[5]||(e[5]=t("h2",{class:"text-xl font-bold text-gray-800 mb-2"},"Erreur de chargement",-1)),e[6]||(e[6]=t("p",{class:"text-gray-600 mb-4"},"Impossible de charger les d√©tails du personnage",-1)),t("button",{onClick:M,class:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors"}," R√©essayer ")])])):(s(),a("div",rt,[t("div",nt,[t("div",it,[t("nav",ct,[L(r,{to:`/projets/projet-${(i=y.value)==null?void 0:i.slug}`,class:"hover:text-amber-600 transition-colors"},{default:be(()=>{var D;return[C(b((D=y.value)==null?void 0:D.title),1)]}),_:1},8,["to"]),e[8]||(e[8]=t("span",null,"‚Üí",-1)),L(r,{to:`/projets/personnages-${(g=y.value)==null?void 0:g.slug}`,class:"hover:text-amber-600 transition-colors"},{default:be(()=>e[7]||(e[7]=[C(" Personnages ")])),_:1},8,["to"]),e[9]||(e[9]=t("span",null,"‚Üí",-1)),t("span",ut,b((p=o.value)==null?void 0:p.firstName)+" "+b((w=o.value)==null?void 0:w.lastName),1)]),t("div",dt,[t("div",gt,[t("div",mt,[H(o.value)?(s(),a("img",{key:0,src:H(o.value),alt:`${o.value.firstName} ${o.value.lastName}`,class:"w-full h-full object-cover"},null,8,vt)):(s(),a("div",pt,b((h=(_=o.value)==null?void 0:_.firstName)==null?void 0:h[0])+b((T=($=o.value)==null?void 0:$.lastName)==null?void 0:T[0]),1))]),t("div",null,[t("h1",ft,b((P=o.value)==null?void 0:P.firstName)+" "+b((U=o.value)==null?void 0:U.lastName),1),t("div",ht,[(V=o.value)!=null&&V.age?(s(),a("span",bt,b(o.value.age)+" ans",1)):k("",!0),(Z=o.value)!=null&&Z.level?(s(),a("span",{key:1,class:le(`px-3 py-1 rounded-full text-xs font-medium ${te(o.value.level)}`)},b(ee(o.value.level)),3)):k("",!0)])])]),t("div",xt,[m.value?k("",!0):(s(),a("button",{key:0,onClick:S,class:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-colors"}," Modifier ")),m.value?(s(),a(q,{key:2},[t("button",{onClick:Q,class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors"}," Sauvegarder "),t("button",{onClick:S,class:"px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg font-medium transition-colors"}," Annuler ")],64)):(s(),a("button",{key:1,onClick:Y,class:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2"},e[10]||(e[10]=[t("span",null,"üé≠",-1),C(" Cr√©er le sch√©ma actantiel ")])))])])]),t("div",yt,[t("div",wt,[t("div",_t,[e[13]||(e[13]=t("h2",{class:"text-lg font-bold text-gray-800 mb-4 flex items-center"},[t("span",{class:"mr-2"},"‚öîÔ∏è"),C(" Forces & Faiblesses ")],-1)),t("div",kt,[t("div",null,[e[11]||(e[11]=t("h3",{class:"font-semibold text-green-700 mb-2 text-sm flex items-center"},[t("span",{class:"mr-1"},"üí™"),C(" Forces ")],-1)),m.value?xe((s(),a("textarea",{key:1,"onUpdate:modelValue":e[0]||(e[0]=D=>c.value.strength=D),class:"w-full h-16 p-2 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-amber-500/30 transition-all resize-none",placeholder:"Forces..."},null,512)),[[ye,c.value.strength]]):(s(),a("div",It,[t("p",$t,b(((ne=o.value)==null?void 0:ne.strength)||"Aucune force d√©finie"),1)]))]),t("div",null,[e[12]||(e[12]=t("h3",{class:"font-semibold text-red-700 mb-2 text-sm flex items-center"},[t("span",{class:"mr-1"},"‚ö†Ô∏è"),C(" Faiblesses ")],-1)),m.value?xe((s(),a("textarea",{key:1,"onUpdate:modelValue":e[1]||(e[1]=D=>c.value.weakness=D),class:"w-full h-16 p-2 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-amber-500/30 transition-all resize-none",placeholder:"Faiblesses..."},null,512)),[[ye,c.value.weakness]]):(s(),a("div",Ct,[t("p",jt,b(((ie=o.value)==null?void 0:ie.weakness)||"Aucune faiblesse d√©finie"),1)]))])])]),t("div",At,[e[16]||(e[16]=t("h2",{class:"text-lg font-bold text-gray-800 mb-4 flex items-center"},[t("span",{class:"mr-2"},"üñºÔ∏è"),C(" Photos ")],-1)),m.value&&((ce=o.value)!=null&&ce.id)?(s(),a("div",Dt,[L(Ge,{"personnage-id":o.value.id,images:c.value.images||[],onImagesUpdated:R},null,8,["personnage-id","images"])])):O(o.value).length>0?(s(),a("div",Lt,[(s(!0),a(q,null,oe(O(o.value),(D,se)=>(s(),a("div",{key:se,class:"w-full aspect-square overflow-hidden rounded-lg border border-gray-200 hover:shadow-lg transition-shadow cursor-pointer",onClick:Wt=>J(se)},[t("img",{src:D,alt:`Image ${se+1} de ${o.value.firstName} ${o.value.lastName}`,class:"w-full h-full object-cover hover:scale-105 transition-transform"},null,8,Ft)],8,Et))),128))])):(s(),a("div",Pt,[e[14]||(e[14]=t("div",{class:"text-gray-400 text-2xl mb-2"},"üñºÔ∏è",-1)),e[15]||(e[15]=t("p",{class:"text-gray-500 text-sm"},"Aucune image",-1)),m.value?k("",!0):(s(),a("p",Ut,"Modifier pour ajouter"))]))]),t("div",Bt,[e[19]||(e[19]=t("h2",{class:"text-lg font-bold text-gray-800 mb-4 flex items-center"},[t("span",{class:"mr-2"},"üìä"),C(" Stats ")],-1)),t("div",Nt,[t("div",zt,[e[17]||(e[17]=t("span",{class:"text-gray-700 text-sm"},"S√©quences",-1)),t("span",Mt,b(((de=(ue=o.value)==null?void 0:ue.stats)==null?void 0:de.sequenceCount)||0),1)]),t("div",St,[e[18]||(e[18]=t("span",{class:"text-gray-700 text-sm"},"Images",-1)),t("span",Tt,b(((me=(ge=o.value)==null?void 0:ge.stats)==null?void 0:me.imageCount)||0),1)])])])]),t("div",Vt,[t("div",Kt,[t("div",Rt,[e[20]||(e[20]=t("h2",{class:"text-xl font-bold text-gray-800 mb-4 flex items-center"},[t("span",{class:"mr-2"},"üìñ"),C(" Background ")],-1)),m.value?(s(),a("div",qt,[L(Fe,{modelValue:c.value.background,"onUpdate:modelValue":e[2]||(e[2]=D=>c.value.background=D),class:"border border-gray-300 rounded-lg h-96"},null,8,["modelValue"])])):(s(),a("div",Ht,[(ve=o.value)!=null&&ve.background?(s(),a("div",{key:0,class:"prose prose-sm max-w-none",innerHTML:o.value.background},null,8,Ot)):(s(),a("p",Zt,"Aucun background d√©fini"))]))])]),t("div",Gt,[e[21]||(e[21]=t("h2",{class:"text-xl font-bold text-gray-800 mb-4 flex items-center"},[t("span",{class:"mr-2"},"üîç"),C(" Analyse rapide ")],-1)),t("div",{class:"p-4 bg-blue-50 rounded-lg border border-blue-200 min-h-[120px]",innerHTML:((pe=o.value)==null?void 0:pe.analysis)||"<em class='text-gray-500'>Aucune analyse disponible</em>"},null,8,Jt)])])])])])),L(at,{images:A.value,"current-index":d.value,show:v.value,onClose:X,"onUpdate:currentIndex":W},null,8,["images","current-index","show"])])}}},ns=re(Xt,[["__scopeId","data-v-2a78d92b"]]);export{ns as default};
