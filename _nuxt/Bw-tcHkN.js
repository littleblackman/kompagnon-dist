import{_ as O}from"./DKoE4HND.js";import{e as E,u as U,x as A,r as k,g as I,f as M,A as B,c as s,a as t,b as S,h as f,F as p,k as g,i as l,t as d,w as R,m as b,a0 as h,o,d as C}from"./DDbqB2VL.js";import{a as D}from"./BTMoKPNP.js";import{P as F}from"./BlRu_04W.js";import{t as V}from"./BzhHMnxU.js";import{r as J}from"./BqMwdbGL.js";import{_ as G}from"./DlAUqK2U.js";const K={key:0,class:"flex justify-center items-center min-h-screen"},Q={key:1},W={class:"flex"},Y={class:"w-80 h-screen sticky top-0 overflow-y-auto border-r border-gray-200 bg-blue-50"},X={class:"p-6"},Z={class:"space-y-3"},q=["onClick"],ee={key:0},te={key:1,class:"ml-4 space-y-2"},se=["onClick"],oe={key:1,class:"ml-4 space-y-1"},re=["onClick"],ne={class:"flex-1 p-6"},le={class:"max-w-4xl mx-auto"},ae={class:"mb-8"},ie={class:"flex items-center gap-3 mb-4"},ue={class:"font-extrabold text-4xl"},de=["innerHTML"],ce={class:"mb-8 p-6 bg-gradient-to-r from-blue-50 to-amber-50 rounded-xl border border-gray-200 shadow-sm"},me={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},pe={class:"flex items-center cursor-pointer p-3 rounded-lg bg-white hover:bg-gray-50 transition-colors border border-gray-100 shadow-sm"},ge={class:"flex items-center cursor-pointer p-3 rounded-lg bg-white hover:bg-amber-50 transition-colors border border-gray-100 shadow-sm"},be={class:"flex items-center cursor-pointer p-3 rounded-lg bg-white hover:bg-blue-50 transition-colors border border-gray-100 shadow-sm"},he={class:"flex items-center cursor-pointer p-3 rounded-lg bg-white hover:bg-amber-50 transition-colors border border-gray-100 shadow-sm"},xe={class:"flex items-center cursor-pointer p-3 rounded-lg bg-white hover:bg-gray-50 transition-colors border border-gray-100 shadow-sm"},ve={class:"flex items-center cursor-pointer p-3 rounded-lg bg-white hover:bg-purple-50 transition-colors border border-gray-100 shadow-sm"},fe={class:"space-y-8"},ye=["id"],_e={key:0},we=["innerHTML"],ke={class:"space-y-6"},Te=["id"],Pe=["innerHTML"],je={class:"space-y-4"},Se=["id"],Ce=["innerHTML"],Me={key:0,class:"text-center text-gray-500 py-12"},L="kompagnon-reading-preferences",Ve=E({__name:"voir-[slug]",setup(Le){U().requireAuth();const x=D(),T=A().params.slug,$=()=>{{const u=localStorage.getItem(L);if(u)try{return JSON.parse(u)}catch(e){console.error("Erreur lors du chargement des prÃ©fÃ©rences:",e)}}return{showOrganizational:!0,showPrintable:!0,showTitles:{h2:!0,h3:!0,h4:!0},numberParts:!1}},N=u=>{localStorage.setItem(L,JSON.stringify(u))},y=$(),c=k(y.showOrganizational),v=k(y.showPrintable),n=k(y.showTitles||{h2:!0,h3:!0,h4:!0}),m=k(y.numberParts),P=u=>{const e=document.getElementById(u);e&&e.scrollIntoView({behavior:"smooth",block:"start"})};I(()=>x.fetchProject(T));const _=M(()=>x.project),w=M(()=>x.parts),H=()=>{x.calculateStats()};return B([c,v,n,m],()=>{console.log("Watcher dÃ©clenchÃ©, showTitles:",n.value);const u={showOrganizational:c.value,showPrintable:v.value,showTitles:n.value,numberParts:m.value};N(u),H(),console.log("Stats aprÃ¨s update:",x.stats)},{deep:!0}),(u,e)=>{const z=O;return _.value?(o(),s("div",Q,[S(F,{"project-slug":f(T)},null,8,["project-slug"]),t("div",W,[t("aside",Y,[t("div",X,[e[8]||(e[8]=t("h3",{class:"font-bold mb-4 text-blue-800 text-lg flex items-center gap-2"}," ðŸ“‹ Plan du projet ",-1)),t("div",Z,[(o(!0),s(p,null,g(w.value,(r,j)=>(o(),s("div",{key:r.id,class:"text-sm"},[n.value.h2?(o(),s("button",{key:0,onClick:a=>P(`part-${r.id}`),class:"w-full text-left font-semibold text-blue-700 flex items-center gap-2 mb-2 hover:text-blue-800 hover:bg-blue-100 p-2 rounded transition-colors cursor-pointer"},[e[7]||(e[7]=C(" ðŸ“– ")),m.value?(o(),s("span",ee,d(f(V)(j+1))+". ",1)):l("",!0),C(d(r.name),1)],8,q)):l("",!0),r.sequences?(o(),s("div",te,[(o(!0),s(p,null,g(r.sequences,a=>(o(),s("div",{key:a.id},[n.value.h3?(o(),s("button",{key:0,onClick:i=>P(`sequence-${a.id}`),class:"w-full text-left text-amber-700 flex items-center gap-2 font-medium hover:text-amber-800 hover:bg-amber-100 p-2 rounded transition-colors cursor-pointer"}," ðŸŽ¯ "+d(a.name),9,se)):l("",!0),n.value.h4&&a.scenes?(o(),s("div",oe,[(o(!0),s(p,null,g(a.scenes,i=>(o(),s("button",{key:i.id,onClick:He=>P(`scene-${i.id}`),class:"w-full text-left text-gray-600 flex items-center gap-2 hover:text-gray-800 hover:bg-gray-100 p-1 px-2 rounded transition-colors cursor-pointer"}," ðŸŽª "+d(i.name),9,re))),128))])):l("",!0)]))),128))])):l("",!0)]))),128))])])]),t("main",ne,[t("div",le,[t("div",ae,[t("div",ie,[t("h1",ue,d(_.value.name),1),S(z,{to:`/projets/projet-${f(T)}`,class:"px-2",title:"Mode Ã‰dition"},{default:R(()=>[S(f(J),{class:"w-4 h-4 link"})]),_:1},8,["to"])]),_.value.description?(o(),s("div",{key:0,innerHTML:_.value.description,class:"italic text-gray-600 text-lg text-justify"},null,8,de)):l("",!0)]),t("div",ce,[e[15]||(e[15]=t("h3",{class:"font-bold mb-4 text-gray-800 text-lg flex items-center gap-2"}," ðŸŽ­ Que souhaitez-vous afficher ? ",-1)),t("div",me,[t("label",pe,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=r=>c.value=r),class:"mr-3 w-5 h-5 text-gray-500 rounded focus:ring-gray-400"},null,512),[[h,c.value]]),e[9]||(e[9]=t("span",{class:"text-gray-600 font-medium flex items-center gap-2"}," ðŸ“ Notes d'organisation ",-1))]),t("label",ge,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=r=>v.value=r),class:"mr-3 w-5 h-5 text-amber-500 rounded focus:ring-amber-400"},null,512),[[h,v.value]]),e[10]||(e[10]=t("span",{class:"text-gray-800 font-medium flex items-center gap-2"}," ðŸŽ¬ Contenu de scÃ¨nes ",-1))]),t("label",be,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=r=>n.value.h2=r),class:"mr-3 w-5 h-5 text-blue-500 rounded focus:ring-blue-400"},null,512),[[h,n.value.h2]]),e[11]||(e[11]=t("span",{class:"text-blue-700 font-medium flex items-center gap-2"}," ðŸ“– Titres des parties ",-1))]),t("label",he,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=r=>n.value.h3=r),class:"mr-3 w-5 h-5 text-amber-500 rounded focus:ring-amber-400"},null,512),[[h,n.value.h3]]),e[12]||(e[12]=t("span",{class:"text-amber-700 font-medium flex items-center gap-2"}," ðŸŽ¯ Titres des sÃ©quences ",-1))]),t("label",xe,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=r=>n.value.h4=r),class:"mr-3 w-5 h-5 text-gray-500 rounded focus:ring-gray-400"},null,512),[[h,n.value.h4]]),e[13]||(e[13]=t("span",{class:"text-gray-800 font-medium flex items-center gap-2"}," ðŸŽª Titres des scÃ¨nes ",-1))]),t("label",ve,[b(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=r=>m.value=r),class:"mr-3 w-5 h-5 text-purple-500 rounded focus:ring-purple-400"},null,512),[[h,m.value]]),e[14]||(e[14]=t("span",{class:"text-purple-700 font-medium flex items-center gap-2"}," ðŸ”¢ NumÃ©roter les parties ",-1))])])]),t("div",fe,[(o(!0),s(p,null,g(w.value,(r,j)=>(o(),s("div",{key:r.id,class:"pl-6"},[n.value.h2?(o(),s("h2",{key:0,id:`part-${r.id}`,class:"text-2xl font-bold mb-4 text-blue-700"},[m.value?(o(),s("span",_e,d(f(V)(j+1))+". ",1)):l("",!0),C(d(r.name),1)],8,ye)):l("",!0),c.value&&r.description?(o(),s("div",{key:1,innerHTML:r.description,class:"organizational-text mb-6"},null,8,we)):l("",!0),t("div",ke,[(o(!0),s(p,null,g(r.sequences,a=>(o(),s("div",{key:a.id,class:"ml-4 pl-4"},[n.value.h3?(o(),s("h3",{key:0,id:`sequence-${a.id}`,class:"text-xl font-semibold mb-3 text-amber-700"},d(a.name),9,Te)):l("",!0),c.value&&a.description?(o(),s("div",{key:1,innerHTML:a.description,class:"organizational-text mb-4"},null,8,Pe)):l("",!0),t("div",je,[(o(!0),s(p,null,g(a.scenes,i=>(o(),s("div",{key:i.id,class:"ml-4"},[n.value.h4?(o(),s("h4",{key:0,id:`scene-${i.id}`,class:"text-lg font-bold mb-2 text-gray-800"},d(i.name),9,Se)):l("",!0),v.value&&i.content?(o(),s("div",{key:1,innerHTML:i.content,class:"scene-content prose prose-sm max-w-none text-justify"},null,8,Ce)):l("",!0)]))),128))])]))),128))])]))),128))]),!w.value||w.value.length===0?(o(),s("div",Me,e[16]||(e[16]=[t("p",null,"Aucun contenu disponible pour ce projet",-1)]))):l("",!0)])])])])):(o(),s("div",K,e[6]||(e[6]=[t("div",{class:"text-lg"},"Chargement...",-1)])))}}}),Re=G(Ve,[["__scopeId","data-v-770f3398"]]);export{Re as default};
